<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CharaOS</title>
    <link rel="stylesheet" href="css/os.css">
    <link rel="stylesheet" href="css/settings.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>

<body>
    <div id="os-root">
        <!-- Wallpaper Background -->
        <div class="wallpaper"></div>

        <!-- Lock Screen -->
        <div id="lock-screen" class="lock-screen hidden">
            <img id="lock-screen-bg" class="lock-bg">
            <div class="lock-content">
                <div class="lock-padlock">
                    <svg viewBox="0 0 24 24" fill="white">
                        <path
                            d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z" />
                    </svg>
                </div>
                <div class="lock-time" id="lock-time">--:--</div>
                <div class="lock-date" id="lock-date">--月--日 星期--</div>

                <div class="lock-password-container hidden" id="lock-pass-container">
                    <input type="password" id="lock-pass-input" placeholder="输入密码" autocomplete="off">
                </div>
            </div>
            <div class="lock-footer">
                <div class="swipe-hint">点击或上滑解锁</div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="time">11:37</div>
            <div class="dynamic-island">
                <div class="camera"></div>
                <div class="sensor"></div>
            </div>
            <div class="status-icons">
                <div class="signal">
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                </div>
                <div class="wifi">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 3c-4.97 0-9 2.02-12 5.25l12 14.25 12-14.25c-3-3.23-7.03-5.25-12-5.25z" />
                    </svg>
                </div>
                <div class="battery">
                    <div class="battery-body">
                        <div class="battery-level"></div>
                    </div>
                    <div class="battery-tip"></div>
                </div>
            </div>
        </div>

        <!-- Desktop Pages Container -->
        <div class="desktop-container">
            <!-- Page 1 -->
            <div class="desktop-page" id="page-1">
                <!-- Top Big Clock (System Info) -->
                <div class="system-time-widget">
                    <div class="big-time">11:37</div>
                    <div class="system-info-row">
                        <span class="date-display">周四 1月15日</span>
                        <span class="weather-display">
                            <span class="weather-icon">晴</span> 24°C
                        </span>
                    </div>
                </div>

                <!-- Music Widget (Medium) -->
                <div class="widget widget-medium music-widget">
                    <div class="music-header">
                        <div class="album-art"></div>
                        <div class="music-text">
                            <div class="song-title">But Daddy I Love Him</div>
                            <div class="artist">Taylor Swift</div>
                        </div>
                        <div class="waveform-icon"> <i></i><i></i><i></i> </div>
                    </div>

                    <div class="progress-section">
                        <div class="progress-bar-container">
                            <span class="curr-time">2:40</span>
                            <div class="progress-track">
                                <div class="progress-fill"></div>
                            </div>
                            <span class="rem-time">-5:20</span>
                        </div>
                    </div>

                    <div class="controls">
                        <span class="btn-star"><svg viewBox="0 0 24 24">
                                <path
                                    d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
                            </svg></span>
                        <span class="btn-prev"><svg viewBox="0 0 24 24">
                                <path d="M6 6h2v12H6zm12.5 6L10 6v12l8.5-6z" />
                            </svg></span>
                        <span class="btn-play" id="music-play-pause"><svg viewBox="0 0 24 24">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
                            </svg></span>
                        <span class="btn-next"><svg viewBox="0 0 24 24">
                                <path d="M16 6h2v12h-2zM5.5 18l8.5-6-8.5-6v12z" />
                            </svg></span>
                        <span class="btn-headphone"><svg viewBox="0 0 24 24">
                                <path
                                    d="M12 4c-4.42 0-8 3.58-8 8v6c0 1.1.9 2 2 2h3v-7H6v-1c0-3.31 2.69-6 6-6s6 2.69 6 6v1h-3v7h3c1.1 0 2-.9 2-2v-6c0-4.42-3.58-8-8-8z" />
                            </svg></span>
                    </div>
                </div>

                <!-- Bottom Row: Photo Widget + Apps Grid -->
                <div class="mixed-row">
                    <!-- Photo Decoration Widget (Main) -->
                    <div class="widget widget-small photo-widget" id="widget-photo-0">
                        <div class="photo-placeholder">
                            <div class="photo-text">点击上传图片</div>
                        </div>
                        <img class="photo-display" src="" alt="">
                    </div>

                    <!-- 2x2 App Grid -->
                    <div class="app-group-2x2">
                        <div class="app-icon item" data-id="app-wechat">
                            <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                            <div class="name">微信</div>
                        </div>
                        <div class="app-icon item" data-id="app-worldbook">
                            <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                            <div class="name">世界书</div>
                        </div>
                        <div class="app-icon item" data-id="app-appearance">
                            <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                            <div class="name">外观设置</div>
                        </div>
                        <div class="app-icon item" data-id="app-renderer">
                            <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                            <div class="name">渲染器</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Page 2 -->
            <div class="desktop-page" id="page-2">
                <!-- Polaroids Row -->
                <div class="polaroid-row widget-medium">
                    <div class="polaroid p1 photo-widget" id="widget-polaroid-1">
                        <div class="pic">
                            <div class="photo-placeholder">
                                <div class="photo-text">点击上传图片</div>
                            </div>
                            <img class="photo-display" src="" alt="">
                        </div>
                    </div>
                    <div class="polaroid p2 photo-widget" id="widget-polaroid-2">
                        <div class="pic">
                            <div class="photo-placeholder">
                                <div class="photo-text">点击上传图片</div>
                            </div>
                            <img class="photo-display" src="" alt="">
                        </div>
                    </div>
                    <div class="polaroid p3 photo-widget" id="widget-polaroid-3">
                        <div class="pic">
                            <div class="photo-placeholder">
                                <div class="photo-text">点击上传图片</div>
                            </div>
                            <img class="photo-display" src="" alt="">
                        </div>
                    </div>
                </div>

                <!-- Row 1: Photo Widget + 2x2 Grid -->
                <div class="mixed-row">
                    <div class="widget widget-small photo-widget" id="widget-photo-1">
                        <div class="photo-placeholder">
                            <div class="photo-text">点击上传图片</div>
                        </div>
                        <img class="photo-display" src="" alt="">
                    </div>

                    <div class="app-group-2x2">
                        <div class="app-icon item" data-id="app-memo">
                            <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                            <div class="name">预设</div>
                        </div>
                        <div class="app-icon item" data-id="app-tutorial">
                            <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                            <div class="name">教学</div>
                        </div>
                        <div class="app-icon item" data-id="app-alipay">
                            <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                            <div class="name">支付宝</div>
                        </div>
                        <div class="app-icon item" data-id="app-stock">
                            <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                            <div class="name">黑市</div>
                        </div>
                    </div>
                </div>

                <!-- Row 2: 2x2 Grid + Photo Widget -->
                <div class="mixed-row">
                    <div class="app-group-2x2">
                        <div class="app-icon item" data-id="app-tiktok">
                            <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                            <div class="name">独人杀</div>
                        </div>
                        <div class="app-icon item" data-id="app-x">
                            <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                            <div class="name">X</div>
                        </div>
                        <div class="item spacer"></div>
                        <div class="item spacer"></div>
                    </div>

                    <div class="widget widget-small photo-widget" id="widget-photo-2">
                        <div class="photo-placeholder">
                            <div class="photo-text">点击上传图片</div>
                        </div>
                        <img class="photo-display" src="" alt="">
                    </div>
                </div>
            </div>
        </div>

        <!-- Pagination Dots -->
        <div class="pagination-dots">
            <div class="dot active"></div>
            <div class="dot"></div>
        </div>

        <!-- Dock -->
        <div class="dock-container">
            <div class="dock-bg">
                <div class="app-icon dock-item" data-id="dock-settings">
                    <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                </div>
                <div class="app-icon dock-item" data-id="dock-appstore">
                    <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                </div>
                <div class="app-icon dock-item" data-id="dock-phone">
                    <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                </div>
                <div class="app-icon dock-item" data-id="dock-safari">
                    <div class="icon"> <img src="" alt="" class="icon-img"> </div>
                </div>
            </div>
        </div>

        <!-- 全局右键/长按上下文菜单 -->
        <div id="context-menu" class="hidden">
            <div class="menu-item" id="menu-rename">
                <span>重命名</span>
            </div>
            <div class="menu-item" id="menu-upload">
                <span>上传图片</span>
            </div>
        </div>

        <!-- Home Bar -->
        <div class="home-bar"></div>
    </div>

    <!-- Error Handler -->
    <script>
        window.onerror = function (msg, url, line, col, error) {
            // Ignore trivial errors
            if (msg.includes('ResizeObserver') || msg.includes('Script error')) return;
            alert('系统错误 (System Error):\n' + msg + '\nFile: ' + url + '\nLine: ' + line);
            return false;
        };
    </script>

    <!-- JS Modules -->
    <script src="js/core/utils.js?v=3"></script>
    <script src="js/core/store.js?v=3"></script>
    <script src="js/core/api.js?v=3"></script>
    <!-- Settings App Modules (Non-ESM) -->
    <script src="js/settings/state.js?v=3"></script>
    <script src="js/settings/ui_render.js?v=3"></script>
    <script src="js/settings/handlers.js?v=3"></script>
    <script src="js/settings/managers.js?v=3"></script>
    <script src="js/settings/index.js?v=3"></script>

    <script src="js/core/os.js?v=3"></script>
</body>

</html>